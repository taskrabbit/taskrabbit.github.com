<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>TaskRabbit - Close a Task</title>
    <link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/grid.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/documentation.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  
  <body>
    <div id="header-container">
      <div id="header">
        <div id="cloudburst"></div>
        <a href="/" id="header-logo"><img src="/images/header-taskrabbitlogo.png" alt="TaskRabbit" height="62" width="162" border="0" /></a>
      </div>
    </div>
    <div id="container">
      <div id="main" class="span-24">
        <div id="sidebar" class="span-6">
          <ul>
          
            <li><a href="/post_simple.html">Posting a Simple Task</a></li>
          
            <li><a href="/auth.html">Authentication</a></li>
          
            <li><a href="/post_task_parameters.html">Parameters for posting a task</a></li>
          
            <li><a href="/post_with_location.html">Posting a Task with locations</a></li>
          
            <li><a href="/post_with_photo.html">Posting a Task with a photo</a></li>
          
            <li><a href="/post_with_sound.html">Posting a Task with audio</a></li>
          
            <li><a href="/account.html">User account information</a></li>
          
            <li><a href="/get_task.html">Task information</a></li>
          
            <li><a href="/get_user.html">User information</a></li>
          
            <li><a href="/city.html">City information</a></li>
          
            <li><a href="/close_task.html">Close a Task</a></li>
          
            <li><a href="/cancel_task.html">Canceling a Task</a></li>
          
            <li><a href="/update_task.html">Parameters for posting a task</a></li>
          
            <li><a href="/comments.html">Comments on Task</a></li>
          
            <li><a href="/offers_listing.html">Offers listing of Task</a></li>
          
            <li><a href="/accept_offer.html">Accept an offer on a Task</a></li>
          
            <li><a href="/counter_offer.html">Countering an offer</a></li>
          
            <li><a href="/decline_offer.html">Decline an offer on a Task</a></li>
          
          </ul>
        </div>
        <div id="content" class="span-18 last">

          <h1 id="closing-a-task">Closing a Task</h1>

<p>After a Task is complete, it must be closed.</p>

<h2 id="simple-close">Simple close</h2>

<h3 id="post-apiv1tasks1452close">POST /api/v1/tasks/1452/close</h3>

<h3 id="simplified-response">Simplified Response</h3>

<p><code>
{
  "id":1452,
  "name":"My Task",
  "state":"closed"
}
</code></p>

<h2 id="set-reimbursements-on-close">Set reimbursements on close</h2>
<p>Set the reimbursement for each Rabbit (runner) assigned to the Task by passing the Rabbit’s user id and the amount to be reimbursed <em>in cents</em>.</p>

<h3 id="post-apiv1tasks1454close">POST /api/v1/tasks/1454/close</h3>

<p><code>
{
  "runners" : [
    {
      "id" : 231,
      "reimbursement_in_cents" : 2230
    }
  ]
}
</code></p>

<h3 id="simplified-response-1">Simplified Response</h3>

<p><code>
{
  "id":1454,
  "name":"My Task",
  "state":"closed"
}
</code></p>

<h2 id="set-the-ratings-on-close">Set the ratings on close</h2>
<p>Set the rating for each Rabbit (runner) assigned to the Task by passing the Rabbit’s user id and the number of stars (<code>integer</code> 1-5), along with a comment.</p>

<h3 id="post-apiv1tasks1455close">POST /api/v1/tasks/1455/close</h3>

<p><code>
{
  "runners" : [
    {
      "id": 234,
      "stars": 5,
      "comments": "He was good!"
    }
  ]
}
</code></p>

<h3 id="simplified-response-2">Simplified Response</h3>

<p><code>
{
  "id":1455,
  "name":"My Task",
  "state":"closed",
  "runner_rates": {
    "items": [
      {
        "runner_id": 234,
        "stars": 5,
        "comments": "He was good!"
      }
    ]
  } 
}
</code>
# Error Cases</p>

<h2 id="incorrect-authorization">Incorrect Authorization</h2>

<h3 id="post-apiv1tasks1452close-1">POST /api/v1/tasks/1452/close</h3>

<h3 id="unauthorized">401 Unauthorized</h3>

<p><code>
{
  "error":"There must be an authenticated user for this action"
}
</code></p>


        </div>
      </div>
    </div>

     <div id="footer" >
    </div><!-- /#footer -->
  </body>
</html>